<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<title>登录</title>
<meta name="author" content="">
<!-- CSS -->
<link rel="stylesheet" href="ajaxfileupload.css">
<style>

</style>
</head>
<body>
	<form>
		<span style="display:none;" id="loading">Loading...</span>
		<input name="upload" type="file" style="width: 100%" />
		<input name="upload1" type="file" style="width: 100%" />
	</form>
	
	<script src="jquery.js"></script>
	<script src="ajaxfileupload.js"></script>
	<script type="text/javascript">
		 function ajaxFileUpload()
    {
        //starting setting some animation when the ajax starts and completes
        $("#loading")
        .ajaxStart(function(){
            $(this).show();
        })
        .ajaxComplete(function(){
            $(this).hide();
        });
        
        /*
            prepareing ajax file upload
            url: the url of script file handling the uploaded files
                        fileElementId: the file type of input element id and it will be the index of  $_FILES Array()
            dataType: it support json, xml
            secureuri:use secure protocol
            success: call back function when the ajax complete
            error: callback function when the ajax failed
            
                */
        $.ajaxFileUpload
        (
            {
                url:'doajaxfileupload.php', 
                secureuri:false,
                fileElementId:['upload','upload1'],
                dataType: 'json',
				data : {name : 'Focus',sex:'1'},
                success: function (data, status)
                {
                    if(typeof(data.error) != 'undefined')
                    {
                        if(data.error != '')
                        {
                            alert(data.error);
                        }else
                        {
                            alert(data.msg);
                        }
                    }
                },
                error: function (data, status, e)
                {
                    alert(e);
                }
            }
        )
        
        return false;

    } 
	
	</script>
</body>
</html>


